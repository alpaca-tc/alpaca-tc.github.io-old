


<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°</title>
    
    <meta name="description" content="
  
  
    
    
      
  
    
      
        
          
            
              
                Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹
              
       ...">
    
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <meta content='Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°' name='title' />

    
  <link rel="author" href="https://plus.google.com/105581201951227096827" />
  <link rel="publisher" href="https://plus.google.com/105581201951227096827" />


    <meta property="og:title" content='Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°' />
<meta property="og:locale" content="ja_JP"/>
<meta property="og:image" content="https://alpaca.tc/images/common/profile.jpg"/>
<meta property="og:type" content="blog"/>
<meta property="og:url" content="http://alpaca.tc/"/>
<meta property="og:site_name" content="Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°"/>
<meta property="og:description" content="
  
  
    
    
      
  
    
      
        
          
            
              
                Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹
              
       ..." />
<meta property="fb:app_id" content="224701561024840" />

    <meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°">
<meta name="twitter:description" content="
  
  
    
    
      
  
    
      
        
          
            
              
                Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹
              
       ...">
<meta name="twitter:image" content="https://http://alpaca.tc/images/meta/twitter.png">
<meta name="twitter:site" content="@alpaca_tc">
<meta name="twitter:creator" content="@alpaca_tc">


    <link rel="shortcut icon" href="/images/common/favicon.ico" type="image/x-icon">

    <script type="text/javascript">window._pt_lt = new Date().getTime();</script>

    <link rel="stylesheet" href="/stylesheets/main.css" type="text/css" media="all"/>
    <meta name="google-site-verification" content="thSL3cUT7BV1-AENglRFIF-kv6I85JJ6_iUGAU8GaQI" />

    <!--[if lte IE 8]>
      <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- [todo] - ã‚ã¨ã§ä¿®æ­£ã™ã‚‹ã‚ˆãƒ¼ -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_require', 'inpage_linkid', '//www.google-analytics.com/plugins/ga/inpage_linkid.js']);
    _gaq.push(['_setAccount', 'UA-44082439-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'https://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>





  <link rel="next" href="2">





  <link rel="canonical" href="http://alpaca.tc/">



  </head>
  <div id="fb-root"></div>

  <body id="default_contents">
    <div id="header_top" class="outer_envelope clearfix">
      <header>        <div class="inner_wrapper clearfix">
          <div class="inner clearfix">
            <div id="logo">
              
                <h1 id="site_title"><a href="/">Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°</a></h1>
              
            </div>

            <nav id="header_nav">
              <ul class="clearfix">
                <li>
                  <a href="/about_me">About Me</a>
                </li>
                <li>
                  <a href="/">Blog</a>
                </li>
                <li>
                  <a href="/works/">Works</a>
                </li>
                <li>
                  <a target="_blank" href="https://github.com/alpaca-tc">GitHub</a>
                </li>
                <li>
                  <a target="_blank" href="https://twitter.com/alpaca_tc">Twitter</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
</header>

      <div id="main_contents" class="clearfix">
        <div class="inner_wrapper">
          <div class="inner">
            <div class="left_page inner_wrapper">
              <div id="page_contents" class="inner">
                <div id="index_contents" class="blog-index">
  
  
    
    <div class="blog-articles">
      <article class="post_row">
  <div class="inner">
    <header class="field-items">
      
        <h1>
          
            <a href="/blog/rust/rust-advent-calendar.html">
              
                Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹
              
            </a>
          
        </h1>
      

      
        <section class="meta">
          <div class="inner">
            










<time datetime="2020-12-21T17:21:00+09:00" pubdate data-updated="true"></time>
            
<span class="byline author">Posted by çŸ³äº•æµ©ä¹‹</span>

            

  <span class="categories">
    
      
    
  </span>


          </div>
        </section>
      
    </header>

    
      <section class="entry-content"><p>ã“ã®è¨˜äº‹ã¯<a href="https://qiita.com/advent-calendar/2020/rust">Rust Advent Calendar 2020</a> 21æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚</p>

<p>ãŠä»•äº‹ã®ãƒ¡ã‚¤ãƒ³ã¯Ruby/TypeScriptã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€æ–°ã—ã„ã“ã¨ã‚’å­¦ã³ãŸã„ãªãƒ¼ã¨æ€ã£ã¦ã€Rustã‚’å‹‰å¼·ã—å§‹ã‚ã¦ã¿ã¾ã—ãŸã€‚<br />
ä»Šå›ã¯WebAssemblyã‚’ä½¿ã£ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹å‡¦ç†ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<h2 id="rustã‚’webassemblyã«å¤‰æ›ã™ã‚‹">Rustã‚’WebAssemblyã«å¤‰æ›ã™ã‚‹</h2>

<p>ã“ã®æ‰‹ã®è¨˜äº‹ã¯æ²¢å±±ã‚ã‚‹ã®ã§ã€ã–ã£ãã‚Šã‚„ã‚Šæ–¹ã ã‘æ›¸ã„ã¦ãŠãã¾ã™ã€‚<br />
<a href="https://github.com/rustwasm/wasm-bindgen"><code class="language-plaintext highlighter-rouge">wasm-bindgen</code></a>ã¨<a href="https://github.com/rustwasm/wasm-pack"><code class="language-plaintext highlighter-rouge">wasm-pack</code></a>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Cargo.toml
[package]
name = "app"
version = "0.0.1"
edition = "2018"

[lib]
crate-type = ["cdylib"]

[dependencies]
wasm-bindgen = "0.2.63"
</code></pre></div></div>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cs"># src/lib.rs</span>
<span class="k">use</span> <span class="nn">wasm_bindgen</span><span class="p">::</span><span class="nn">prelude</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>

<span class="nd">#[wasm_bindgen]</span>
<span class="k">struct</span> <span class="nf">ApplicationRunner</span><span class="p">();</span>

<span class="nd">#[wasm_bindgen]</span>
<span class="k">impl</span> <span class="n">ApplicationRunner</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code># index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'module'</span><span class="nt">&gt;</span>
      <span class="k">import</span> <span class="nx">init</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ApplicationRunner</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./app.js</span><span class="dl">'</span>

      <span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">init</span><span class="p">(</span><span class="dl">'</span><span class="s1">/app.wasm</span><span class="dl">'</span><span class="p">)</span>
        <span class="k">new</span> <span class="nx">ApplicationRunner</span><span class="p">()</span>
      <span class="p">})()</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>ã‚ã¨ã¯ <code class="language-plaintext highlighter-rouge">wasm-pack</code> ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚Œã°å®Œæˆã§ã™ã€‚
ã‚ã¡ã‚ƒç°¡å˜ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wasm-pack build --no-typescript --dev --target web --out-dir ./public
</code></pre></div></div>

<h2 id="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</h2>

<p>ç¶šã„ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦Rustã«ãƒ‘ãƒ¼ã‚¹ã•ã›ã‚‹å°ç·šã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚<br />
å…ˆã»ã©å®šç¾©ã—ãŸ <code class="language-plaintext highlighter-rouge">ApplicationRunner</code> ã‚’newã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’listenã—ãŸDOMã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ãŠãã¾ã™ã€‚</p>

<p>DOMã®ç”Ÿæˆã«ã¯ <code class="language-plaintext highlighter-rouge">virtual_dom_rs</code> ã¨ <code class="language-plaintext highlighter-rouge">web_sys</code> ã¨ <code class="language-plaintext highlighter-rouge">js_sys</code> ã‚’ä½¿ã„ã¾ã™ã€‚<br />
ã™ã”ãå˜ç´”ãªä¾‹ã§ã¯ã€ã“ã‚“ãªæ„Ÿã˜ã§DOMã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">vdom</span> <span class="o">=</span> <span class="nd">html!</span> <span class="p">{</span> <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span> <span class="p">};</span>
<span class="k">let</span> <span class="n">window</span> <span class="o">=</span> <span class="nn">web_sys</span><span class="p">::</span><span class="nf">window</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">()</span>
<span class="k">let</span> <span class="n">dom_updater</span> <span class="o">=</span> <span class="nn">DomUpdater</span><span class="p">::</span><span class="nf">new_append_to_mount</span><span class="p">(</span><span class="n">vdom</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">window</span><span class="nf">.document</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">()</span><span class="nf">.body</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">());</span>
<span class="n">dom_updater</span><span class="nf">.update</span><span class="p">(</span><span class="n">vdom</span><span class="p">);</span>
</code></pre></div></div>

<p>ä»Šå›ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚’ã—ãŸã„ã®ã§ã€vdomã®ä¸­èº«ã‚’æ›¸ãæ›ãˆã¦ã€inputã‚¿ã‚°ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä»•è¾¼ã‚“ã DOMã«ã—ã¦ã¿ã¾ã™ã€‚</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">html!</span> <span class="p">{</span>
  <span class="o">&lt;</span><span class="n">input</span>
    <span class="k">type</span><span class="o">=</span><span class="s">"file"</span>
    <span class="n">onchange</span><span class="o">=</span><span class="k">move</span> <span class="p">|</span><span class="n">event</span><span class="p">:</span> <span class="nn">web_sys</span><span class="p">::</span><span class="n">InputEvent</span><span class="p">|</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">target</span> <span class="o">=</span> <span class="n">event</span><span class="nf">.target</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
        <span class="k">let</span> <span class="n">input</span> <span class="o">=</span> <span class="n">target</span><span class="py">.dyn_ref</span><span class="p">::</span><span class="o">&lt;</span><span class="n">HtmlInputElement</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
        <span class="k">let</span> <span class="n">files</span> <span class="o">=</span> <span class="n">input</span><span class="nf">.files</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
        <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="n">files</span><span class="nf">.item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>

        <span class="k">let</span> <span class="n">file_reader</span> <span class="o">=</span> <span class="nn">web_sys</span><span class="p">::</span><span class="nn">FileReader</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
        <span class="n">file_reader</span><span class="nf">.read_as_array_buffer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>

        <span class="k">let</span> <span class="k">mut</span> <span class="n">onload</span> <span class="o">=</span> <span class="nn">Closure</span><span class="p">::</span><span class="nf">wrap</span><span class="p">(</span><span class="nn">Box</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="k">move</span> <span class="p">|</span><span class="n">event</span><span class="p">:</span> <span class="n">Event</span><span class="p">|</span> <span class="p">{</span>
            <span class="k">let</span> <span class="n">file_reader</span><span class="p">:</span> <span class="n">FileReader</span> <span class="o">=</span> <span class="n">event</span><span class="nf">.target</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">()</span><span class="nf">.dyn_into</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
            <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="n">file_reader</span><span class="nf">.result</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">();</span>
            <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="nn">js_sys</span><span class="p">::</span><span class="nn">Uint8Array</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">file</span><span class="p">);</span>

            <span class="k">let</span> <span class="k">mut</span> <span class="n">bytes</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">0</span><span class="p">;</span> <span class="n">file</span><span class="nf">.length</span><span class="p">()</span> <span class="k">as</span> <span class="nb">usize</span><span class="p">];</span>
            <span class="n">file</span><span class="nf">.copy_to</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">bytes</span><span class="p">);</span>

            <span class="c">// ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã®ãƒ‘ãƒ¼ã‚¹ã‚’é–‹å§‹ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹</span>
            <span class="nf">do_something</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bytes</span><span class="p">)</span>
        <span class="p">})</span> <span class="k">as</span> <span class="nb">Box</span><span class="o">&lt;</span><span class="nf">FnMut</span><span class="p">(</span><span class="mi">_</span><span class="p">)</span><span class="o">&gt;</span><span class="p">);</span>

        <span class="n">file_reader</span><span class="nf">.set_onload</span><span class="p">(</span><span class="nf">Some</span><span class="p">(</span><span class="n">onload</span><span class="nf">.as_ref</span><span class="p">()</span><span class="nf">.unchecked_ref</span><span class="p">()));</span>
        <span class="n">onload</span><span class="nf">.forget</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="o">&gt;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹</h2>

<p>ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã™ã‚‹å‡¦ç†ãŒæ›¸ã‘ãŸã®ã§ã€æ¬¡ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã„ãã¾ã™ã€‚<br />
å˜ã«ãƒã‚¤ãƒŠãƒªã‚’èª­ã‚“ã§ã„ãã ã‘ã§ã‚ã‚Œã° <code class="language-plaintext highlighter-rouge">std::io::Cursor</code> ã ã‘ã§ã„ã‘ã¾ã™ãŒã€little endianã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã‚„ã‚„æ“ä½œãŒé¢å€’ã§ã™ã€‚</p>

<p>ãã“ã§ã€<a href="https://docs.rs/byteorder/1.3.4/byteorder/">byteorder</a>ã‚’ä½¿ã£ã¦èª­ã¿è¾¼ã‚“ã§ã„ãã¾ã™ã€‚<br />
ä¸‹è¨˜ã®ä¾‹ã§ã¯ã€ä»Šå¾ŒUTF8ã®æ–‡å­—åˆ—å¤‰æ›ã‚„ç‰¹å®šã®ãƒã‚¤ãƒŠãƒªã«ç‰¹åŒ–ã—ãŸèª­ã¿è¾¼ã¿ã«å¯¾å¿œã™ã‚‹æ™‚ã«æ‹¡å¼µã—ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€èª­ã¿å–ã‚Šç”¨ã®wrapperã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚<br />
å˜ç´”ãªzipãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ã‚¹ã§ã‚ã‚Œã°ã€file name fieldã‚„extra fieldãªã©ã®å¯å¤‰é•·ã®fieldãŒã‚ã‚‹ãŸã‚ã€æŒ‡å®šé•·ã§vecã‚„stringã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ç”¨æ„ã™ã‚‹ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">byteorder</span><span class="p">::{</span><span class="n">BigEndian</span><span class="p">,</span> <span class="n">ByteOrder</span><span class="p">,</span> <span class="n">LittleEndian</span><span class="p">,</span> <span class="n">ReadBytesExt</span><span class="p">};</span>

<span class="k">pub</span> <span class="k">struct</span> <span class="n">Binary</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">cursor</span><span class="p">:</span> <span class="n">Cursor</span><span class="o">&lt;&amp;</span><span class="nv">'a</span> <span class="p">[</span><span class="nb">u8</span><span class="p">]</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="n">Binary</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">bytes</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">[</span><span class="nb">u8</span><span class="p">])</span> <span class="k">-&gt;</span> <span class="n">Binary</span> <span class="p">{</span>
        <span class="n">Binary</span> <span class="p">{</span>
            <span class="n">cursor</span><span class="p">:</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">bytes</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">position</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u64</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.cursor</span><span class="nf">.position</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_little_u16</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u16</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_u16</span><span class="p">::</span><span class="o">&lt;</span><span class="n">LittleEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_little_u32</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u32</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_u32</span><span class="p">::</span><span class="o">&lt;</span><span class="n">LittleEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_u16</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u16</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_u16</span><span class="p">::</span><span class="o">&lt;</span><span class="n">BigEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_u32</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u32</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_u32</span><span class="p">::</span><span class="o">&lt;</span><span class="n">BigEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_i16</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i16</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_i16</span><span class="p">::</span><span class="o">&lt;</span><span class="n">BigEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">read_i32</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="k">self</span><span class="py">.cursor.read_i32</span><span class="p">::</span><span class="o">&lt;</span><span class="n">BigEndian</span><span class="o">&gt;</span><span class="p">()</span><span class="nf">.unwrap</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’æ›¸ã„ã¦ã„ã">ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’æ›¸ã„ã¦ã„ã</h3>

<p>éå»ã«Rubyã§psdã‚„zipã®ãƒ‘ãƒ¼ã‚µã‚’æ›¸ã„ãŸã“ã¨ãŒã‚ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã‚‰ã¯ä»•æ§˜æ›¸é€šã‚Šã®å˜ç´”ãªæ§‹é€ ã ã£ãŸã®ã§ã€åŒæ§˜ã«å…ˆé ­ã‹ã‚‰èª­ã¿è¾¼ã‚“ã§structã«è©°ã‚ã¦ã„ãã ã‘ã§ã„ã‘ãã†ã§ã™ã€‚<br />
ä»Šå›ã¯zipã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹å‡¦ç†ã®æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// == LocalFileHeader</span>
<span class="c">//</span>
<span class="c">// local file header signature     4 bytes  (0x04034b50)</span>
<span class="c">// version needed to extract       2 bytes</span>
<span class="c">// general purpose bit flag        2 bytes</span>
<span class="c">// compression method              2 bytes</span>
<span class="c">// last mod file time              2 bytes</span>
<span class="c">// last mod file date              2 bytes</span>
<span class="c">// crc-32                          4 bytes</span>
<span class="c">// compressed size                 4 bytes</span>
<span class="c">// uncompressed size               4 bytes</span>
<span class="c">// file name length                2 bytes</span>
<span class="c">// extra field length              2 bytes</span>
<span class="k">struct</span> <span class="n">LocalFileHeader</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">version</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">general_purpose_bit_flag</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">compression_method</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">last_modified_file_time</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">last_modified_file_date</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">crc_32</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">compressed_size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">uncompressed_size</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">file_name_length</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
    <span class="k">pub</span> <span class="n">extra_field_length</span><span class="p">:</span> <span class="nb">u16</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">LocalFileHeader</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">from_bytes</span><span class="p">(</span><span class="n">bytes</span><span class="p">:</span> <span class="o">&amp;</span><span class="p">[</span><span class="nb">u8</span><span class="p">])</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="n">LocalFileHeader</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">let</span> <span class="k">mut</span> <span class="n">binary</span> <span class="o">=</span> <span class="nn">Binary</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">bytes</span><span class="p">);</span>

        <span class="k">let</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_little_u32</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">version</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_little_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">general_purpose_bit_flag</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_little_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">compression_method</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_little_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">last_modified_file_time</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">last_modified_file_date</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">crc_32</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u32</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">compressed_size</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u32</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">uncompressed_size</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u32</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">file_name_length</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
        <span class="k">let</span> <span class="n">extra_field_length</span> <span class="o">=</span> <span class="n">binary</span><span class="nf">.read_u16</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

        <span class="nf">Ok</span><span class="p">(</span><span class="n">LocalFileHeader</span> <span class="p">{</span>
            <span class="n">signature</span><span class="p">,</span>
            <span class="n">version</span><span class="p">,</span>
            <span class="n">general_purpose_bit_flag</span><span class="p">,</span>
            <span class="n">compression_method</span><span class="p">,</span>
            <span class="n">last_modified_file_time</span><span class="p">:</span> <span class="n">last_modified_file_time</span><span class="p">,</span>
            <span class="n">last_modified_file_date</span><span class="p">,</span>
            <span class="n">crc_32</span><span class="p">,</span>
            <span class="n">compressed_size</span><span class="p">,</span>
            <span class="n">uncompressed_size</span><span class="p">,</span>
            <span class="n">file_name_length</span><span class="p">,</span>
            <span class="n">extra_field_length</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ã¨ã¦ã‚‚ç°¡å˜ã§ã™ã­ã€‚</p>

<h2 id="ãƒ‘ãƒ¼ã‚¹ã—ãŸå†…å®¹ã‚’htmlã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹">ãƒ‘ãƒ¼ã‚¹ã—ãŸå†…å®¹ã‚’HTMLã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹</h2>

<p>ã§ã¯ã€æœ€å¾Œã«ãƒ‘ãƒ¼ã‚¹ã—ãŸå†…å®¹ã‚’HTMLã¸ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ã¿ã¾ã™ã€‚<br />
è«¸ã€…çœç•¥ã—ã¦ã„ã‚‹ã®ã§ã“ã®ã¾ã¾ã§ã¯å‹•ãã¾ã›ã‚“ãŒã€é›°å›²æ°—ã¨ã—ã¦ã¯ã“ã‚“ãªæ„Ÿã˜ã§DOMã‚’ç”Ÿæˆã—ã¦ã€åˆã‚ã«ä½œã£ãŸDomUpdaterã®updateã«è¿”ã‚Šå€¤ã®VirtualNodeã‚’æ¸¡ã›ã°OKã§ã™ã€‚</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// let local_file_header = LocalFileHeader::from_bytes(&amp;bytes)</span>
<span class="c">// let vdom = render(...)</span>
<span class="c">// dom_updater.update(vdom); ã¨ã„ã†æ„Ÿã˜ã§ä½¿ã†</span>
<span class="k">fn</span> <span class="nf">render</span><span class="p">(</span><span class="n">local_file_header</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">LocalFileHeader</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">VirtualNode</span> <span class="p">{</span>
    <span class="nd">html!</span> <span class="p">{</span>
      <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span>
          <span class="n">signature</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.signature</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">version</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.version</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">general_purpose_bit_flag</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.general_purpose_bit_flag</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">compression_method</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.compression_method</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">last_modified_file_time</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.last_modified_file_time</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">last_modified_file_date</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.last_modified_file_date</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="n">crc_32</span><span class="p">:</span> <span class="p">{</span><span class="nd">format!</span><span class="p">(</span><span class="s">"{:X}"</span><span class="p">,</span> <span class="n">local_file_header</span><span class="py">.crc_32</span><span class="p">)}</span>
          <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>

<p>ä»Šå›ã¯<code class="language-plaintext highlighter-rouge">wasm-bindgen</code>ã‚’ä½¿ã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹å‡¦ç†ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚<br />
ã‚‚ã†å°‘ã—ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’ä½œã‚Šè¾¼ã‚“ã§ã„ã‘ã°ã€ç”»åƒå¤‰æ›ã‚„zipã®å†åœ§ç¸®ãªã©ã„ã‚ã„ã‚ãªå‡¦ç†ã‚’æ›¸ãã“ã¨ãŒã§ããã†ã§ã™ã€‚</p>

<p>å¯èƒ½ã§ã‚ã‚Œã°ã€ä»•äº‹ã§ã‚‚ã¡ã‚ƒã‚“ã¨Rustæ›¸ã„ã¦ã¿ãŸã„ã®ã§Real Worldã®æ´»ç”¨äº‹ä¾‹ã‚’ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„ãªãã¨æ€ã„ã¾ã—ãŸ(Â´ãƒ»Ï‰ãƒ»ï½€)</p>
</section>
      

      
    

    
      





<section class="sharing clearfix">
  <div class="button ft_like_button">
    <div class="fb-like" data-href="http://alpaca.tc/blog/rust/rust-advent-calendar.html" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="false"></div>
  </div>

  <div class="button ft_share_button">
    <div class="fb-share-button" data-href="http://alpaca.tc/blog/rust/rust-advent-calendar.html" data-type="button_count"></div>
  </div>

  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc/blog/rust/rust-advent-calendar.html" class="hatena-bookmark-button" data-hatena-bookmark-title="
Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ | Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚° 
" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  </div>

  <div class="button google_plus_button_like">
    <div data-annotation="none" data-href="http://alpaca.tc/blog/rust/rust-advent-calendar.html" class="g-plusone" data-size="medium" ></div>
  </div>

  <div class="button twitter_button">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://alpaca.tc/blog/rust/rust-advent-calendar.html" data-via="alpaca_tc" date-width="120" data-counturl="http://alpaca.tc/blog/rust/rust-advent-calendar.html" ></a>
  </div>
</section>

    
  </div>
</article>

    </div>
  
    
    <div class="blog-articles">
      <article class="post_row">
  <div class="inner">
    <header class="field-items">
      
        <h1>
          
            <a href="/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html">
              
                kamipoã•ã‚“ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨æ‹ ç‚¹ã‚’è·¨ã„ã å‹‰å¼·ä¼š
              
            </a>
          
        </h1>
      

      
        <section class="meta">
          <div class="inner">
            










<time datetime="2020-12-18T17:21:00+09:00" pubdate data-updated="true"></time>
            
<span class="byline author">Posted by çŸ³äº•æµ©ä¹‹</span>

            

  <span class="categories">
    
      
    
  </span>


          </div>
        </section>
      
    </header>

    
      <section class="entry-content"><p>ã“ã®è¨˜äº‹ã¯<a href="https://adventar.org/calendars/5425">äº¬éƒ½é–‹ç™ºæ‹ ç‚¹ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</a> 18æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚</p>

<p>ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã«ã¯é–‹ç™ºæ‹ ç‚¹ãŒè¤‡æ•°ã‚ã‚Šã¾ã™ãŒã€æŠ€è¡“æƒ…å ±ã¯Slackã§è­°è«–ãƒ»å…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚<br />
ä»Šæ—¥ã¯ãã‚“ãªSlackã®ä¸­ã‹ã‚‰ã€æ±äº¬æ‹ ç‚¹ã¨äº¬éƒ½æ‹ ç‚¹ã‚’è·¨ã„ã§é–‹å‚¬ã—ãŸã€ŒRailsã¸ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã™ã‚‹å‹‰å¼·ä¼šã€ã«ã¤ã„ã¦ã€æ±äº¬æ‹ ç‚¹ã®<a href="https://github.com/alpaca-tc">ã‚¢ãƒ«ãƒ‘ã‚«éšŠé•·</a>ãŒç´¹ä»‹ã—ã¾ã™ã€‚</p>

<h2 id="ã¯ã˜ã¾ã‚Šã®slack">ã¯ã˜ã¾ã‚Šã®Slack</h2>

<p>ãµã¨ã—ãŸæ™‚ã«ã€ç¤¾å†…Slackã®Rubyãƒãƒ£ãƒ³ãƒãƒ«ã§ã“ã‚“ãªä¼šè©±ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<blockquote>
  <p><img width="20" alt="@alpaca-tc" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/alpaca-tc.jpg" /> @alpaca-tc</p>

  <p>ç¨‹ã‚ˆã„é›£æ˜“åº¦ã§ã€kamipoã•ã‚“ãŒã€Œã“ã‚Œè‡ªåˆ†ãŒã‚„ã‚‰ã‚“ã§ã‚‚ãˆãˆã‚„ã‚ã€ã¿ãŸã„ãªissueãŒã‚ã‚Œã°</p>

  <p>ã“ã®slackã«æŠ•ã’ã¦ã‚‚ã‚‰ã£ã¦</p>

  <p>èª°ã‹ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã‚µãƒãƒ¼ãƒˆã—ã¤ã¤ã€æ–°å’ãŒRailsã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã™ã‚‹ã¿ãŸã„ãªã®ã‚„ã‚ŠãŸã„:eyes:</p>
</blockquote>

<p>ã™ã‚‹ã¨ã€kamipoã•ã‚“ã‹ã‚‰ã™ãè§£æ±ºã§ãã‚‹ã‚‚ã®ã¯è¦‹ãŸç¬é–“ã«ç›´ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã¨å‰ç½®ããŒã‚ã£ãŸä¸Šã§ã€
ã“ã‚“ãªissueã‚’æ•™ãˆã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚</p>

<!-- more -->

<blockquote>
  <p><img width="20" alt="@kamipo" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png" /> @kamipo</p>

  <p>ç°¡å˜ã˜ã‚ƒãªã„ã‘ã©ç›´ã—ãŸã»ã†ãŒã„ã„ã¨æ€ã£ã¦ã‚‹ã‚„ã¤ã ã¨ãŸã¨ãˆã° <a href="https://github.com/rails/rails/issues/35204">rails/rails#35204</a> ã¨ã‹ã€‚</p>

  <p>ã“ã‚Œã¯automatic_inverse_ofãŒãƒã‚°ã£ã¦ã¦inverse_ofã£ã¦ä¸€å¯¾ä¸€ã®é–¢ä¿‚ã«ãªã‚‹ã¯ãšãªã®ã«</p>

  <p>belongs_to :user ã¨ belongs_to :writer ã®ä¸¡æ–¹ã¨ã‚‚inverse_ofãŒ :user ã¨èª¤èªã•ã‚Œã‚‹ã£ã¦ãƒã‚°ã§ã€</p>

  <p>èµ·ãã¦ã‚‹ã“ã¨ã«æ°—ã¥ãã¥ã‚‰ã„ã‹ã‚‰ç›´ã—ãŸã»ã†ãŒã„ã„ã‚“ã ã‘ã©</p>

  <p>inverse_of: false ã™ã‚Œã°å›é¿ã§ãã‚‹ã‹ã‚‰å„ªå…ˆé †ä½ãŒä½ã„ã€ã¨ã‹ãã†ã„ã†ç³»ã®ã¯ã„ã£ã±ã„ã‚ã‚‹ã€‚</p>
</blockquote>

<p>ãµãƒ¼ã‚€ã€ãƒ‘ãƒƒã¨è¦‹ã¯ã‚ˆãåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ç¨‹ã‚ˆã„é›£æ˜“åº¦ã‚’æ„Ÿã˜ã¾ã™ã€‚<br />
è¿½åŠ ã§ã‹ãªã‚Šè©³ã—ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹(ã»ã¼ç­”ãˆ)ã‚’ã„ãŸã ã„ã¦ã€æ—©é€Ÿãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã™ãƒ½(ãƒ»âˆ€ãƒ» )ï¾‰</p>

<h2 id="æ‹ ç‚¹ã‚’è·¨ã„ã§å‹‰å¼·ä¼šã‚’é–‹å‚¬">æ‹ ç‚¹ã‚’è·¨ã„ã§å‹‰å¼·ä¼šã‚’é–‹å‚¬</h2>

<p>æ˜¨ä»Šã®ã‚³ãƒ­ãƒŠç¦ã«ã‚ˆã£ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ–ãŒä¸€æ°—ã«é€²ã¿ã¾ã—ãŸã€‚(åƒ•ã‚‚ã€ä»Šå¹´ã¯æ•°å›ã—ã‹å‡ºç¤¾ã—ã¦ã„ã¾ã›ã‚“)<br />
ãŠã‹ã’ã§ã€æ‹ ç‚¹é–“ã‚’è·¨ãã‚ªãƒ³ãƒ©ã‚¤ãƒ³å‹‰å¼·ä¼šã‚‚çªç™ºçš„ã«é–‹å‚¬ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<h3 id="å½“æ—¥ã®æµã‚Œ">å½“æ—¥ã®æµã‚Œ</h3>

<p>ä»Šå›ã¯ã€äº¬éƒ½ã®é–‹ç™ºãƒ¡ãƒ³ãƒãƒ¼ã‚’å«ã‚ãŸæ•°äººã®ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‹Ÿã‚Šã€Discordã§è©±ã—ãªãŒã‚‰kamipoã•ã‚“ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç´è§£ã„ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<h4 id="ã¾ãšã¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—">ã¾ãšã¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h4>

<p><a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a>ã‹ã‚‰ActiveRecordã«é–¢ã™ã‚‹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚’æŠœç²‹ã—ã¦ã€å„è‡ªã§ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã„ãã¾ã™ã€‚<br />
ãã®ä¸Šã§ã€å…ˆã»ã©ã®issueã‚’å†ç¾ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã€ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹çŠ¶æ…‹ã‚’å†ç¾ã—ã¾ã—ãŸã€‚</p>

<p><a href="https://gist.github.com/alpaca-tc/e53fa34a55ebee4a170b54a87c266761">å½“æ—¥ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †æ›¸</a></p>

<h4 id="ç¶šã„ã¦èª¿æŸ»">ç¶šã„ã¦èª¿æŸ»</h4>

<p>ãã—ã¦ã€å…¨å“¡ã®ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹çŠ¶æ…‹ã«ãªã£ãŸã‚‰ã€kamipoã•ã‚“ã«ã„ãŸã ã„ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’èª¿æŸ»ã—ã¦ã„ãã¾ã™ã€‚</p>

<blockquote>
  <p><img width="20" alt="@kamipo" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png" /> @kamipo</p>

  <p>ã“ã®issueã‚’å‚ç…§ã—ã¦ã‚‹ã“ã“ <a href="https://github.com/rails/rails/pull/36708#discussion_r307672794">rails/rails#36708</a> ã§ã‚‚è¨€åŠã—ã¦ã‚‹ã‚“ã§ã™ãŒã€</p>

  <p>automatic_inverse_ofã¯æ”¹å–„å¯èƒ½ã§æ”¹å–„ã™ã‚Œã°è‡ªãšã¨ã“ã®å•é¡Œã‚‚è§£æ±ºã•ã‚Œã¾ã™ã€‚å…·ä½“çš„ã«ã¯ :foreign_key ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’inverse_ofåˆ¤å®šã«å«ã‚ã‚‹ã“ã¨ã§ã“ã‚Œã¾ã§åˆ¤å®šä¸èƒ½ã ã£ãŸinverse_ofåˆ¤å®šã‚‚å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>

  <p>ã“ã®issueè‡ªä½“ã¯foreign_keyæœªæŒ‡å®šã®åŒä¸€ã‚¯ãƒ©ã‚¹å‚ç…§ã—ã¦ã‚‹associationãŒã‚ã‚‹å ´åˆã«foreign_keyã®ä¸€è‡´ã‚’åˆ¤å®šã›ãšã«ã‚¯ãƒ©ã‚¹ãŒä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹ã ã‘ã§inverse_ofåˆ¤å®šã—ã¦ã‚‹ã“ã¨ãŒå•é¡Œãªã®ã ã¨æ€ã„ã¾ã™ã€‚</p>
</blockquote>

<p>ã–ã£ãã‚Šè¨€ã†ã¨ã€<a href="https://github.com/rails/rails/issues/35204">ã“ã®issue</a>ã¯ãƒ¢ãƒ‡ãƒ«ã®é–¢é€£ã‚’æŒ‡å®šã—ãŸæ™‚ã«ã€åˆ¤å®šã®æ¡ä»¶æ¼ã‚ŒãŒã‚ã‚‹ã“ã¨ãŒåŸå› ã®ã‚ˆã†ã§ã™ã€‚<br />
ã¿ã‚“ãªã§<a href="https://github.com/ktmouk/rails/blob/98ee2a40bf2df9ee2f7daca5532b71eace410fba/activerecord/lib/active_record/reflection.rb#L602"><code class="language-plaintext highlighter-rouge">ActiveRecord::Reflection#automatic_inverse_of</code></a>ã‚ãŸã‚Šã‚’èª­ã¿é€²ã‚ã¦ã€inverse_ofã®åˆ¤å®šå‡¦ç†ã«èª¤ã‚ŠãŒã‚ã‚‹ã“ã¨ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚</p>

<h2 id="prãŒå®Œæˆ">PRãŒå®Œæˆ</h2>

<p>ã‚ã„ã‚ã„è©±ã—ãªãŒã‚‰PRãŒã§ããŸã¨ã“ã‚ã§ã€kamipoã•ã‚“ã«PRã‚’è¦‹ã¦ã‚‚ã‚‰ã£ã¦æ›´ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã„ãŸã ãã¾ã—ãŸã€‚</p>

<ul>
  <li>ã‚ˆã»ã©ã®ã“ã¨ãŒãªã„é™ã‚Š1PR 1commitã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒã®ãã¾ã—ã„ <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#squashing-commits">contribution guide</a></li>
  <li>ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ãŒã¾ã çŸ¥ã‚‰ãªã„æƒ…å ±ã¯ã€ãœã‚“ã¶PRã«å«ã‚ã¦ãã‚Œã‚‹ã»ã†ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒãƒ¼ãƒ‰ãƒ«ãŒä¸‹ãŒã‚‹ã®ã§é ‘å¼µã£ã¦æ¬²ã—ã„
    <ul>
      <li>ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ãŒã€ã‚ã–ã‚ã–ã“ã‚Œã¯æ­£ã—ã„å¤‰æ›´ã ã¨è§£èª¬ã‚³ãƒ¡ãƒ³ãƒˆã—ãªãã¦ã‚‚ã„ã„ãã‚‰ã„æ›¸ãã¨ã„ã„</li>
      <li>å®Œå…¨ã•ã‚ˆã‚Šã‚‚ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å…±æœ‰ã™ã‚‹æ°—æŒã¡ãŒé‡è¦</li>
    </ul>
  </li>
</ul>

<p>è²´é‡ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã„ãŸã ããªãŒã‚‰ã€å®Œæˆã—ãŸPRãŒã“ã¡ã‚‰ã§ã™ã€‚</p>

<p><a href="https://github.com/rails/rails/pull/40643">rails/rails#40643</a></p>

<p>ã“ã®PRã¯ç„¡äº‹ãƒãƒ¼ã‚¸ã•ã‚Œã€Rails6.1.0ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ğŸ‰</p>

<h2 id="slackã§ã®å››æ–¹å±±è©±">Slackã§ã®å››æ–¹å±±è©±</h2>

<p>ä»Šå›ã¯å‹‰å¼·ä¼šã®è©±ã‚’æŠœç²‹ã—ã¾ã—ãŸãŒã€æ™®æ®µã‹ã‚‰Slackã§ã¯æ§˜ã€…ãªãƒˆãƒ”ãƒƒã‚¯ã®æŠ€è¡“ç³»ã®è©±é¡ŒãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚<br />
å€‹äººçš„ã«ã‚‚ã€kamipoã•ã‚“ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã„ãŸã ã‘ãŸãŠã‹ã’ã§ã€ç›´è¿‘1ãƒ¶æœˆã§4ã¤ã»ã©PRã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>

<ul>
  <li><a href="https://github.com/rails/rails/pull/40704">è¤‡æ•°DBã«å¯¾å¿œã—ãŸrails console â€“sandbox</a></li>
  <li><a href="https://github.com/rails/rails/pull/40545">serializeã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹</a></li>
  <li><a href="https://github.com/rails/rails/pull/40538">6.1.0.rc1ã®ãƒã‚°ä¿®æ­£ 1</a></li>
  <li><a href="https://github.com/rails/rails/pull/40547">6.1.0.rc1ã®ãƒã‚°ä¿®æ­£ 2</a></li>
</ul>

<p>ã²ã¨ã‚Šã§OSSã¸å–ã‚Šçµ„ã‚€ã®ã¯é›£ã—ã•ãŒã‚ã‚Šã¾ã™ãŒã€Slackã§è­°è«–ãŒã§ãã‚‹ã¨ãƒãƒ¼ãƒ‰ãƒ«ãŒã‚°ãƒƒã¨ä¸‹ãŒã£ã¦è¸ã¿å‡ºã—ã‚„ã™ããªã‚Šã¾ã™ã­ã€‚</p>

<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>

<p>ä»Šå›ã®å‹‰å¼·ä¼šã®ä»¶ã‚‚ãã†ã§ã™ãŒã€å¼Šç¤¾ã§ã¯æ‹ ç‚¹ã«é–¢ä¿‚ãªãã“ã†ã„ã£ãŸæŠ€è¡“ã®è©±é¡Œã§ãƒ¯ã‚¤ãƒ¯ã‚¤ã§ãã¾ã™ã€‚
ãœã²çš†ã•ã‚“ã‚‚éŠã³ã«ãã¦ãã ã•ã„ãƒ½(ãƒ»âˆ€ãƒ» )ï¾‰</p>

<p>ã¾ã¨ã‚
<strong>ã€Œkamipoã•ã‚“ã¯ã™ã”ã„äººã€</strong></p>

<hr />

<p>(â€»kamipoã•ã‚“ã¯å¼Šç¤¾ç¤¾å“¡ã§ã¯ãªãã€å–„æ„ã§Slackã®ãƒãƒ£ãƒ³ãƒãƒ«ã«å…¥ã£ã¦ãã ã•ã£ã¦ã„ã¾ã™ã€‚)</p>
</section>
      

      
    

    
      





<section class="sharing clearfix">
  <div class="button ft_like_button">
    <div class="fb-like" data-href="http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="false"></div>
  </div>

  <div class="button ft_share_button">
    <div class="fb-share-button" data-href="http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" data-type="button_count"></div>
  </div>

  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" class="hatena-bookmark-button" data-hatena-bookmark-title="
kamipoã•ã‚“ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨æ‹ ç‚¹ã‚’è·¨ã„ã å‹‰å¼·ä¼š | Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚° 
" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  </div>

  <div class="button google_plus_button_like">
    <div data-annotation="none" data-href="http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" class="g-plusone" data-size="medium" ></div>
  </div>

  <div class="button twitter_button">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" data-via="alpaca_tc" date-width="120" data-counturl="http://alpaca.tc/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html" ></a>
  </div>
</section>

    
  </div>
</article>

    </div>
  
    
    <div class="blog-articles">
      <article class="post_row">
  <div class="inner">
    <header class="field-items">
      
        <h1>
          
            <a href="/blog/pixiv/job/i_retired_from_pixiv.html">
              
                ãƒ”ã‚¯ã‚·ãƒ–ã‚’é€€è·ã—ã¾ã—ãŸï¼
              
            </a>
          
        </h1>
      

      
        <section class="meta">
          <div class="inner">
            










<time datetime="2017-07-03T00:03:00+09:00" pubdate data-updated="true"></time>
            
<span class="byline author">Posted by çŸ³äº•æµ©ä¹‹</span>

            

  <span class="categories">
    
      
    
  </span>


          </div>
        </section>
      
    </header>

    
      <section class="entry-content"><p>6æœˆæœ«ã§æ ªå¼ä¼šç¤¾ãƒ”ã‚¯ã‚·ãƒ–ã‚’é€€ç¤¾ã—ãŸã®ã§ã€é€€è·ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ãã‚¾ãƒ½(ãƒ»âˆ€ãƒ» )ï¾‰<br />
ã‚¨ãƒ³ãƒˆãƒªã‚’é€šã˜ã¦ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦åƒãèª°ã‹ã®å‚è€ƒã«ãªã‚Œã°å¬‰ã—ã„ã‚¾</p>

<p><img class="image_on_frame center" src="/images/blog/pixiv/face.jpg" /></p>

<!-- more -->

<h2 id="ä¼šç¤¾ã«ã¤ã„ã¦">ä¼šç¤¾ã«ã¤ã„ã¦</h2>

<p>ãƒ”ã‚¯ã‚·ãƒ–ã¯ã€ŒãŠçµµã‹ããŒã‚‚ã£ã¨æ¥½ã—ã‚ã‚‹å ´æ‰€ã‚’ä½œã‚‹ã“ã¨ã€ã‚’åŸºæœ¬ç†å¿µã¨ã—ã¦ã€<br />
<a href="https://www.pixiv.net">pixiv.net</a>ã‚’ä¸­å¿ƒã¨ã—ãŸå‰µä½œæ´»å‹•ã«ã¾ã¤ã‚ã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã‚’é‹å–¶ã™ã‚‹ä¼šç¤¾ã§ã™ã€‚</p>

<p>å…¥ç¤¾ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€ <strong>ã“ã‚Œã‹ã‚‰æ–°è¦äº‹æ¥­ã‚’ã©ã‚“ã©ã‚“ã‚„ã‚‹ï¼</strong> ã¨ã„ã†ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã—ãŸã€‚<br />
(å…¥ç¤¾å½“æ™‚ã®ã‚¨ãƒ³ãƒˆãƒªã¯ã“ã¡ã‚‰â†’<a href="/blog/blog/i-im-join-for-this-company.html">ã‚ã¾ãã‚‹ã—ã„ï¼‘å¹´ï¼</a>)</p>

<h2 id="ã“ã‚Œã¾ã§ã‚„ã£ã¦ããŸã“ã¨">ã“ã‚Œã¾ã§ã‚„ã£ã¦ããŸã“ã¨</h2>

<p>ã‚¤ãƒ©ã‚¹ãƒˆã‚„ã‚¢ãƒ‹ãƒ¡ã¨ã„ã£ãŸæ–‡åŒ–ã«å…¨ãè§¦ã‚Œã¦ã“ãªã‹ã£ãŸåƒ•ã«ã¨ã£ã¦ã€<br />
ãƒ”ã‚¯ã‚·ãƒ–ã§éã”ã—ãŸï¼“å¹´é–“ã¯å…¨ã¦ãŒæ–°é®®ã§æ¥½ã—ã„ã‚‚ã®ã§ã—ãŸ( ï¾Ÿâˆ€ï¾Ÿ)oå½¡</p>

<p>å…¥ç¤¾ã—ã¦ã™ãã«<a href="https://factory.pixiv.net">pixivFACTORY</a>ã®ç«‹ã¡ä¸Šã’ã‚’ã—ã¾ã—ãŸã€‚<br />
é–‹ç™ºãƒªãƒ¼ãƒ€ãƒ¼ã«ãªã£ã¦ã‹ã‚‰ï¼“å¹´é–“ã§ã€pixivFACTORYã®å¤§ããªæ©Ÿèƒ½ã®å¤šãã‚’æ‹…å½“ã•ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚</p>

<p><img class="image_on_frame center" src="/images/blog/pixiv/contribute.png" /></p>

<p>æˆ‘ãŒå­ã®ã‚ˆã†ãªå¯æ„›ã„å¯æ„›ã„ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã­ã€‚</p>

<p>æ–°å’2å¹´ç›®ã”ã‚ã‹ã‚‰ã¯ã€RailsãŠã˜ã•ã‚“ã¨ã—ã¦<br />
ãƒ¬ã‚¬ã‚·ãƒ¼æ®ºã™ãƒãƒ³ã€Rails-Wayãƒãƒ³ã¨ã—ã¦ã€ç¤¾å†…ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã‚ã£ã¦ãã¾ã—ãŸã€‚</p>

<ul>
  <li><a href="https://booth.pm">BOOTH</a></li>
  <li><a href="https://factory.pixiv.net">pixivFACTORY</a></li>
  <li><a href="https://comic.pixiv.net">pixivã‚³ãƒŸãƒƒã‚¯</a></li>
  <li><a href="https://novel.pixiv.net">pixivãƒãƒ™ãƒ«</a></li>
  <li><a href="https://pawoo.net">pawoo</a></li>
</ul>

<p>é€€è·ãŒæ±ºã¾ã£ã¦ã‹ã‚‰ã®æœ€å¾Œã®3ãƒ¶æœˆã¯ã€pixivFACTORYã‚’é›¢ã‚Œã¦<a href="https://pawoo.net">pawoo</a>ã®é–‹ç™ºã‚’ã—ã¦ã„ã¾ã—ãŸã€‚<br />
Mastodonæœ¬å®¶ã«é«˜é€ŸåŒ–ã‚„ãƒã‚°ä¿®æ­£ã®ãƒ‘ãƒƒãƒã‚’æŠ•ã’ã¦ã„ãŸã‚‰ã€Githubã®Graphã§ãƒˆãƒƒãƒ—4ã«å…¥ã‚‹ãã‚‰ã„ã ã£ãŸã®ã§ã€é€€ç¤¾ç›´å‰ã¾ã§ãã‚Œãªã‚Šã«ã¯ã‚„ã£ã¦ã„ãŸã¨æ€ã„ã¾ã™ã€‚</p>

<h2 id="ãªã‚“ã§è¾ã‚ã‚‹ã®">ãªã‚“ã§è¾ã‚ã‚‹ã®ï¼Ÿ</h2>

<p>ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒãŸã¾ãŸã¾è‰¯ã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚</p>

<p>å¼•ãç¶™ãã‚’ã—ã¦æ–°ã—ã„æŒ‘æˆ¦ã‚’ã—ã‚ˆã†ã¨ã„ã†ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ãŠè©±ã‚’ã„ãŸã ãã¾ã—ãŸã€‚<br />
ãã®äº‹æ¥­ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒé­…åŠ›çš„ã ã£ãŸã®ã§ã€ã‚¨ã‚¤ãƒ¤ãƒƒã¨è»¢è·ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>

<h2 id="è»¢è·ã¯ä½•ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã®">è»¢è·ã¯ä½•ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã®ï¼Ÿ</h2>

<p>æ¬¡ã¯ã€ã„ã‚ã‚†ã‚‹Fintechã®ä¼šç¤¾ã«ã„ãã¾ã™ã€‚<br />
pixivã«å…¥ã£ãŸæ™‚ã¨åŒã˜ã‚ˆã†ã«ã€ä½•ã‚‚å‰æçŸ¥è­˜ã‚’çŸ¥ã‚‰ãªã„æ¥­ç•Œã ã£ãŸã¨ã„ã†ã¨ã“ã‚ã«æƒ¹ã‹ã‚Œã¾ã—ãŸã€‚</p>

<p><strong>ä½•ã‚‚çŸ¥ã‚‰ãªã„ã€åˆ†ã‹ã‚‰ãªã„ã¨ã„ã†ã®ã¯ã€ãªã‚“ã§ã‚‚ã§ãã‚‹ã“ã¨ã®è£è¿”ã—ãªã®ã§ãã£ã¨é¢ç™½ã„ã§ã™ã­ã€‚</strong></p>

<p>ä½•ã‚’ã™ã‚‹ã‹ã¯æ±ºã¾ã£ã¦ã¾ã›ã‚“ãŒã€ãã£ã¨æ–°ã—ã„ä¼šç¤¾ã§ã‚‚æ¥½ã—ã‚ã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚(Â´ãƒ»Ï‰ãƒ»)</p>

<h2 id="ã“ã‚Œã‹ã‚‰ä½•ã™ã‚‹ã®">ã“ã‚Œã‹ã‚‰ä½•ã™ã‚‹ã®ï¼Ÿ</h2>

<p>8æœˆã¾ã§1ãƒ¶æœˆã®ãŠä¼‘ã¿ã‚’ã„ãŸã ã„ã¦ã„ã¾ã™ï¼<br />
å…ƒåŒåƒšãŒã‚„ã£ã¦ã„ã‚‹ã‚¢ãƒ•ãƒªã‚«ã®äº‹æ¥­ã‚’ãŠæ‰‹ä¼ã„ã—ã¤ã¤ã€ 7/21ã‹ã‚‰ã¯Splatoonã«è²»ã‚„ã—ãŸã„ã¨æ€ã£ã¦ãŠã‚Šã¾ã™ã€‚</p>

<p>ã¾ãŸã€æ—¥æœ¬ã§ã¾ã è¡Œã£ãŸã“ã¨ãŒãªã„éƒ½é“åºœçœŒãŒæ®‹ã‚Š5çœŒãªã®ã§<br />
å„åœ°ã‚’ã¾ã‚ã‚Šã€åœ°å…ƒã®ãŠã£ã¡ã‚ƒã‚“ã¨åœ°é…’ã‚’é£²ã¿èªã‚‰ã„ãªãŒã‚‰éã”ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h2 id="ãŠã‚ã‚Šã«">ãŠã‚ã‚Šã«</h2>

<p>æ–°å’ã¨ã—ã¦æ±äº¬ã«å‡ºã¦ãã¦ã€<br />
ã“ã®3å¹´é–“ã‚’ã€pixivã§åƒã‘ãŸã“ã¨ã¯æœ€é«˜ã®æ—¥ã€…ã§ã—ãŸã€‚</p>

<p>å­¦ç”Ÿæ™‚ä»£ã‹ã‚‰ä½•ç¤¾ã‚‚çµŒé¨“ã—ã¦ã„ã¾ã™ãŒ<br />
<strong>ã‚ã‚“ãªã«æ¥½ã—ã„ä¼šç¤¾ã‚‚ãªã‹ãªã‹ãªã„</strong> ã®ã§ã€æœ¬å½“ã«ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ï¼</p>

<p>æœ€å¾Œã«ä¾‹ã®ã‚‚ã®è²¼ã£ã¦ãŠãã¾ã™ã€‚ä½•ã‹ã„ãŸã ã‘ãŸã‚‰é£›ã³è·³ã­ã¦å–œã³ã¾ã™ã€‚ãƒ½(ãƒ»âˆ€ãƒ» )ï¾‰</p>

<p><a href="http://amzn.asia/8lJqzlJ">è²¡å¸ƒã‚’ç„¡ãã—ã¦çµ¶æœ›ãƒãƒ³ã®ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆ</a><br />
(æ—…è¡Œåˆæ—¥ã®æœ¬æ—¥ã€9ä¸‡ãã‚‰ã„å…¥ã£ãŸè²¡å¸ƒã¨ã‚«ãƒ¼ãƒ‰ã‚’è½ã¨ã—ã¦åœ°æ–¹ã§æ­»ã«çµ¶ãˆãã†ã§ã™ã€‚ãƒã‚¸ã§â€¦ã€‚)</p>

<p><img class="image_on_frame center" src="/images/blog/pixiv/last.jpg" /></p>

<p>3å¹´é–“ã€æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>
</section>
      

      
    

    
      





<section class="sharing clearfix">
  <div class="button ft_like_button">
    <div class="fb-like" data-href="http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="false"></div>
  </div>

  <div class="button ft_share_button">
    <div class="fb-share-button" data-href="http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" data-type="button_count"></div>
  </div>

  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" class="hatena-bookmark-button" data-hatena-bookmark-title="
ãƒ”ã‚¯ã‚·ãƒ–ã‚’é€€è·ã—ã¾ã—ãŸï¼ | Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚° 
" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  </div>

  <div class="button google_plus_button_like">
    <div data-annotation="none" data-href="http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" class="g-plusone" data-size="medium" ></div>
  </div>

  <div class="button twitter_button">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" data-via="alpaca_tc" date-width="120" data-counturl="http://alpaca.tc/blog/pixiv/job/i_retired_from_pixiv.html" ></a>
  </div>
</section>

    
  </div>
</article>

    </div>
  
    
    <div class="blog-articles">
      <article class="post_row">
  <div class="inner">
    <header class="field-items">
      
        <h1>
          
            <a href="/blog/rails/create-share-link.html">
              
                ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚¯ã®ä½œã‚Šæ–¹
              
            </a>
          
        </h1>
      

      
        <section class="meta">
          <div class="inner">
            










<time datetime="2015-10-13T21:31:00+09:00" pubdate data-updated="true"></time>
            
<span class="byline author">Posted by çŸ³äº•æµ©ä¹‹</span>

            

  <span class="categories">
    
      
    
  </span>


          </div>
        </section>
      
    </header>

    
      <section class="entry-content"><p>æœ€è¿‘Railsã§ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚¯ã‚’å®Ÿè£…ã—ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚
ã¿ã‚“ãªã¯ã©ã†ã‚„ã£ã¦å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã ã‚ã†ï¼Ÿ</p>

<p>â†“ã“ã‚“ãªURLã­</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://alpaca.tc/shares/uIx90S
</code></pre></div></div>

<p>å®Ÿè£…é¢ç™½ã‹ã£ãŸã®ã§ç´¹ä»‹ã—ã¦ã¿ã¾ã™ï¼ï¼œ</p>

<!-- more -->

<p>ã¡ãªã¿ã«åƒ•ã®å®Ÿè£…æ–¹æ³•ã¯ã€ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ãƒƒã‚¯ãªã‚«ãƒ©ãƒ ã‚’æŒã¤<code class="language-plaintext highlighter-rouge">share_links</code>ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã£ã¦ã€ã‚·ã‚§ã‚¢ã—ãŸã„recordã‚’ç´ä»˜ã‘ã‚‹ã“ã¨ã§å®Ÿç¾ã—ãŸã€‚</p>

<p>ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚­ãƒ¼ãŒå¿…è¦ãªãŸã‚<code class="language-plaintext highlighter-rouge">id</code>ã‚’ä½¿ç”¨ã—ã¦ã„ã¦ã«ã€2åº¦ã‚¯ã‚¨ãƒªã‚’ç™ºè¡Œã—ã¦ã„ã‚‹ã®ã ã‘ã©ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ°—ã«ã™ã‚‹ãªã‚‰<code class="language-plaintext highlighter-rouge">LAST_INSERT_ID</code>ã‚’ä½¿ã£ã¦ä¸€åº¦ã®ã‚¯ã‚¨ãƒªã§æ¸ˆã¾ã™æ–¹ãŒè‰¯ã„ã€‚</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateShareLinks</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:share_links</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:sharable</span><span class="p">,</span> <span class="ss">polymorphic: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:uuid</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span> <span class="ss">null: </span><span class="kp">false</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">index</span> <span class="ss">:uuid</span><span class="p">,</span> <span class="ss">unique: </span><span class="kp">true</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">index</span> <span class="p">[</span><span class="ss">:sharable_type</span><span class="p">,</span> <span class="ss">:sharable_id</span><span class="p">],</span> <span class="ss">unique: </span><span class="kp">true</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># lib/share_link_uuid.rb</span>
<span class="nb">require</span> <span class="s1">'digest/sha2'</span>

<span class="k">module</span> <span class="nn">ShareLinkUuid</span>
  <span class="c1"># URLã§ä½¿ç”¨å¯èƒ½ãªæ–‡å­—åˆ—</span>
  <span class="no">HEX64</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="p">(</span><span class="s1">'0'</span><span class="o">..</span><span class="s1">'9'</span><span class="p">),</span> <span class="o">*</span><span class="p">(</span><span class="s1">'A'</span><span class="o">..</span><span class="s1">'Z'</span><span class="p">),</span> <span class="o">*</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">),</span> <span class="s1">'_'</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">].</span><span class="nf">freeze</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">generate</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
    <span class="n">digest</span> <span class="o">=</span> <span class="no">Digest</span><span class="o">::</span><span class="no">SHA512</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="nb">id</span><span class="p">.</span><span class="nf">to_s</span><span class="p">).</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nf">to_s</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

    <span class="n">uuid</span> <span class="o">=</span> <span class="n">digest</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\d{2}/</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">token</span><span class="o">|</span>
      <span class="no">HEX64</span><span class="p">[</span><span class="n">token</span><span class="p">.</span><span class="nf">to_i</span><span class="p">(</span><span class="mi">8</span><span class="p">).</span><span class="nf">to_s</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nf">to_i</span><span class="p">]</span>
    <span class="k">end</span>

    <span class="n">uuid</span><span class="p">[</span><span class="mi">0</span><span class="o">...</span><span class="n">length</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># app/models/share_link.rb</span>
<span class="k">class</span> <span class="nc">ShareLink</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="no">UUID_LENGTH</span> <span class="o">=</span> <span class="mi">6</span>

  <span class="n">belongs_to</span> <span class="ss">:sharable</span><span class="p">,</span> <span class="ss">polymorphic: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">required: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:uuid</span><span class="p">,</span> <span class="ss">absence: </span><span class="p">{</span> <span class="ss">if: :new_record?</span> <span class="p">},</span> <span class="ss">presence: </span><span class="p">{</span> <span class="ss">if: :persisted?</span> <span class="p">}</span>
  <span class="n">validates</span> <span class="ss">:sharable_type</span><span class="p">,</span> <span class="ss">inclusion: </span><span class="p">{</span> <span class="ss">in: </span><span class="sx">%w(Item)</span> <span class="p">}</span>
  <span class="n">after_create</span> <span class="ss">:save_uuid</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">save_uuid</span>
    <span class="vi">@uuid_length</span> <span class="o">||=</span> <span class="no">UUID_LENGTH</span>
    <span class="n">update_uuid!</span><span class="p">(</span><span class="vi">@uuid_length</span><span class="p">)</span>
  <span class="k">rescue</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">RecordNotUnique</span>
    <span class="c1"># UUIDã®é•·ã•ã‚’å¢—ã‚„ã—ã¦å†è©¦è¡Œ</span>
    <span class="vi">@uuid_length</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">retry</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update_uuid!</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">uuid</span> <span class="o">=</span> <span class="no">ShareLinkUuid</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
    <span class="n">update!</span><span class="p">(</span><span class="ss">uuid: </span><span class="n">uuid</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">module</span> <span class="nn">Sharable</span>
    <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

    <span class="n">included</span> <span class="k">do</span>
      <span class="n">has_one</span> <span class="ss">:share_link</span><span class="p">,</span> <span class="ss">as: :sharable</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>

      <span class="n">scope</span> <span class="ss">:shared</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">joins</span><span class="p">(</span><span class="ss">:share_link</span><span class="p">)</span> <span class="p">}</span>
      <span class="n">scope</span> <span class="ss">:not_shared</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">.</span><span class="nf">not</span><span class="p">(</span><span class="ss">id: </span><span class="n">shared</span><span class="p">)</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># app/models/item.rb</span>
<span class="k">class</span> <span class="nc">Item</span> 
  <span class="kp">include</span> <span class="no">ShareLink</span><span class="o">::</span><span class="no">Sharable</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.application.routes.draw do
  resources :shares, only: [:create], controller: :share_links
end

class ShareLinksController &lt; ApplicationController
  def create
    @share_link = ShareLink.new(share_link_params)

    if @share_link.save
      render format: :json
    else
      render :error
    end
  end

  private

  def share_link_params
    params.require(:share_link).permit(
      :sharable_type, :sharable_id
    ).merge(user: current_user)
  end
end
</code></pre></div></div>

<p>ã†ãƒ¼ã‚“ã€ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ã‚ã‚Šãã†ã ãƒŠâ€¦</p>
</section>
      

      
    

    
      





<section class="sharing clearfix">
  <div class="button ft_like_button">
    <div class="fb-like" data-href="http://alpaca.tc/blog/rails/create-share-link.html" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="false"></div>
  </div>

  <div class="button ft_share_button">
    <div class="fb-share-button" data-href="http://alpaca.tc/blog/rails/create-share-link.html" data-type="button_count"></div>
  </div>

  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc/blog/rails/create-share-link.html" class="hatena-bookmark-button" data-hatena-bookmark-title="
ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚¯ã®ä½œã‚Šæ–¹ | Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚° 
" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  </div>

  <div class="button google_plus_button_like">
    <div data-annotation="none" data-href="http://alpaca.tc/blog/rails/create-share-link.html" class="g-plusone" data-size="medium" ></div>
  </div>

  <div class="button twitter_button">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://alpaca.tc/blog/rails/create-share-link.html" data-via="alpaca_tc" date-width="120" data-counturl="http://alpaca.tc/blog/rails/create-share-link.html" ></a>
  </div>
</section>

    
  </div>
</article>

    </div>
  
    
    <div class="blog-articles">
      <article class="post_row">
  <div class="inner">
    <header class="field-items">
      
        <h1>
          
            <a href="/blog/diary/pixiv-year.html">
              
                æ±äº¬ã«æ…£ã‚Œã¦ããŸ
              
            </a>
          
        </h1>
      

      
        <section class="meta">
          <div class="inner">
            










<time datetime="2014-05-24T01:07:00+09:00" pubdate data-updated="true"></time>
            
<span class="byline author">Posted by çŸ³äº•æµ©ä¹‹</span>

            

  <span class="categories">
    
      
    
  </span>


          </div>
        </section>
      
    </header>

    
      <section class="entry-content"><p>æ˜¨å¹´ã®6æœˆã«è¶Šã—ã¦ãã¦ã€ã‚ã¨3ãƒ¶æœˆã»ã©ã§æ±äº¬ã«æ¥ã¦ä¸€å¹´ï¼ï¼Ÿ<br />
æ™‚é–“ãŒçµŒã¤ã®ã¯æ—©ã„ã‚‚ã®ã§ã™ã­ãƒ¼â€¦ã€‚</p>

<!-- more -->

<h2 id="ä»Šå¹´ã®ä¸€å¹´ã‚’æŒ¯ã‚Šè¿”ã£ã¦">ä»Šå¹´ã®ä¸€å¹´ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã€‚</h2>

<p>æ†§ã‚Œã®æ±äº¬ã«æ¥ã¦ã€ãªã‚“ã ã‹ç›®çš„ã‚‚ãªãä¸€å¹´ãŒéãã‹ã‘ã¦ã¾ã—ãŸã€‚<br />
ãšã£ã¨æ±äº¬ã«æ†§ã‚Œã¦ã„ã¦ã€å¤¢ãŒå¶ã£ã¡ã‚ƒã£ãŸã‚‰é•·ã„é–“æœ¬å½“ã«ç„¡ç›®çš„ã§ç”Ÿãã¦ã¾ã—ãŸã­:(</p>

<p>ã‚ã®å‹‰å¼·ã¨ä»•äº‹ã®ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãª3ãƒ¶æœˆã¯ã©ã“ã¸ã‚„ã‚‰â€¦</p>

<h3 id="ãŠä»•äº‹">ãŠä»•äº‹ã€‚</h3>

<p>6æœˆã«å…¥ã£ã¦ã‹ã‚‰<a href="https://booth.pm">BOOTH</a>ã«ã‚¢ã‚µã‚¤ãƒ³ã•ã‚Œã¦ã€æ•°ãƒ¶æœˆã‚’éã”ã—<br />
ãã®å¾Œã€<a href="http:://factory.pixiv.net">pixivFACTORY</a>ã®ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã¾ã—ãŸã€‚</p>

<p>pixivFACTORYãŒå‡ºãŸå¾Œã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“é”ãŒå¬‰ã—ã„è¨€è‘‰ã‚’è¨€ã£ã¦ãã ã•ã‚‹ã®ã‚’Twitterã§çœºã‚ã¦ã„ã¦ã€</p>

<p>ã‚†ã‚‹ã‚„ã‹ãƒ¼ã«â€¦ã€Œãƒœãƒƒã€ ã£ã¨ç«ãŒç€ã„ãŸä»Šæ—¥ã“ã®é ƒã§ã™ã€‚</p>

<p>æœ€è¿‘ã¯ã€ä»•äº‹ãŒæœ€é«˜ã«æ¥½ã—ã„ã€‚<br />
å®Ÿã¯å…¥ç¤¾ã™ã‚‹å‰ã«ã“ã®ä¼šç¤¾ã«æœŸå¾…ã—ã¦ã„ãŸã“ã¨ã¯ãšã£ã¨ã‚„ã‚‰ã›ã¦è²°ãˆã¦ã„ã¦ã€æ–‡å¥ã¯ç„¡ã„ã¯ãšãªã®ã«ã‚¤ãƒã‚¤ãƒç›®çš„ãŒç„¡ãã¦ã‚„ã‚‹æ°—ãŒå‡ºã¦ã¾ã›ã‚“ã§ã—ãŸã€‚</p>

<p>ã§ã‚‚ã€è‡ªåˆ†ã§ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ã¦ãã ã•ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã®å£°ã‚’èã„ã¦ã€ã‚ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ã‚„ã‚‰ã­ã°â€¦ï¼ï¼ï¼ã¨ã‚„ã‚‹æ°—ãŒæ¼²ã£ã¦ãã¦ã„ã‚‹ä»Šæ—¥ã“ã®é ƒã§ã™ã€‚</p>

<p>æƒœã—ã‚€ã¹ãã¯pixivã¯ãƒ›ãƒ¯ã‚¤ãƒˆä¼æ¥­ãªã¨ã“ã‚ã€‚ã‚‚ã†ãƒ–ãƒ©ãƒƒã‚¯ä¼æ¥­ã«ç”Ÿãã¦ã„ããŸã„ã€‚</p>

<h3 id="ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ</h3>

<p>ã‚¢ãƒ¼ãƒˆã®è¶£å‘³ãŒã‹ãªã‚Šå……å®Ÿã—ã¦ã„ã¾ã—ãŸï¼</p>

<p>æ±äº¬ã£ã¦ã‚„ã£ã±ã‚Šã™ã”ã„ã§ã™ã‚ˆï¼<br />
ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãŒå¤šã„ã®ã§ãƒ—ãƒ©ã€œã£ã¨å‡ºã‹ã‘ã¦é©å½“ã«ã‚ªã‚·ãƒ£ãƒ¬ãã†ãªã‚«ãƒ•ã‚§ã‚„ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«å…¥ã£ã¦ã‚‚æ¥½ã—ã‚ã‚‹ã€‚ã™ã”ã„ï¼</p>

<p>å°±æ´»å‰ã«ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã§å±•ç¤ºã•ã‚Œã¦ãŸæ–¹ã¨ä»²è‰¯ããªã£ã¦ã€ãã®ã¾ã¾ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ãŠä»˜ãåˆã„ã—ã¦ãŸã‚Šã€å‹äººä¼ã„ã§è‰²ã‚“ãªäººã¨ä¼šãˆãŸã‚Šã€ã™ã”ã„ï¼ï¼</p>

<p>å²é˜œã‚„é–¢è¥¿ã«å±…ãŸé ƒã§ã¯è€ƒãˆã‚‰ã‚Œãªã„ã§ã™ã­ã€‚</p>

<p>ã‚ã¨ã€ä¸æ„æ‰“ã¡ã ã£ãŸã‚“ã§ã™ãŒã€å¿˜å¹´ä¼šã‚„ãªã‚“ã‚„ã‚‰ã¨å‰è·ã‚„å‰ã€…è·ã®æ–¹ã«å£°ã‚’æ›ã‘ã¦ã‚‚ã‚‰ãˆã¦å¬‰ã—ã‹ã£ãŸã§ã™ã€‚</p>

<h3 id="æ®‹ã‚Šã¡ã‚‡ã£ã¨">æ®‹ã‚Šã¡ã‚‡ã£ã¨</h3>

<p>ã‚‚ã†ã™ãå…¥ç¤¾å¼ã§ã™ã€‚<br />
æ–°å’ã«ãªã‚‹ã®ã§ã¾ãŸã‚†ã‚‹ãé ‘å¼µã‚Šã¾ã™ã€‚</p>
</section>
      

      
    

    
      





<section class="sharing clearfix">
  <div class="button ft_like_button">
    <div class="fb-like" data-href="http://alpaca.tc/blog/diary/pixiv-year.html" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="false"></div>
  </div>

  <div class="button ft_share_button">
    <div class="fb-share-button" data-href="http://alpaca.tc/blog/diary/pixiv-year.html" data-type="button_count"></div>
  </div>

  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc/blog/diary/pixiv-year.html" class="hatena-bookmark-button" data-hatena-bookmark-title="
æ±äº¬ã«æ…£ã‚Œã¦ããŸ | Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚° 
" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  </div>

  <div class="button google_plus_button_like">
    <div data-annotation="none" data-href="http://alpaca.tc/blog/diary/pixiv-year.html" class="g-plusone" data-size="medium" ></div>
  </div>

  <div class="button twitter_button">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://alpaca.tc/blog/diary/pixiv-year.html" data-via="alpaca_tc" date-width="120" data-counturl="http://alpaca.tc/blog/diary/pixiv-year.html" ></a>
  </div>
</section>

    
  </div>
</article>

    </div>
  

  <div class="pagination">
    

    
      
      
      
      
        <a class="paging_number current" href="/blog/page/1/">1</a>
      
    
      
      
      
      
        <a class="paging_number " href="/blog/page/2/">2</a>
      
    
      
      
      
      
        <a class="paging_number " href="/blog/page/3/">3</a>
      
    
      
      
      
      
    
      
      
      
      
    
      
      
      
      
    
      
      
      
      
    
      
      
      
      
    

    
      <a data-label="æ¬¡" class="paging_number next" href="/blog/page/2/">æ¬¡ã®è¨˜äº‹ã¸ &rarr;</a>
    
  </div>

  <script type="text/javascript" charset="utf-8">
    (function() {
      $(function() {
        var isSmartPhone = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
        if (isSmartPhone) {
          var $pagination = $('.pagination'),
          $prev = $pagination.find('.prev'),
          $next = $pagination.find('.next');
          $prev.text($prev.data('label'));
          $next.text($next.data('label'));
        }
      });
    })();
  </script>
</div>

              </div>
            </div>

            <aside id="sidebar" class="right_page inner_wrapper">
  
<section id="side_category_posts" class="sidebar_row">
  <div id="blog-archives" class="category">
    <h1>æœ€æ–°è¨˜äº‹</h1>
    
      <article>
        <time datetime="2020-12-21T17:21:00+09:00" pubdate><span class='month'>Dec</span> <span class='day'>21</span> <span class='year'>2020</span></time>
        <h1><a href="/blog/rust/rust-advent-calendar.html">Rustã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹</a></h1>
      </article>
    
      <article>
        <time datetime="2020-12-18T17:21:00+09:00" pubdate><span class='month'>Dec</span> <span class='day'>18</span> <span class='year'>2020</span></time>
        <h1><a href="/blog/ruby/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai.html">kamipoã•ã‚“ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨æ‹ ç‚¹ã‚’è·¨ã„ã å‹‰å¼·ä¼š</a></h1>
      </article>
    
  </div>
</section>

  




  
    <section id="side_about_me" class="sidebar_row">
  <h1>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h1>
  <section>
    <figure class="image_wrapper">
      <img src="/images/common/profile.jpg" alt="çŸ³äº• æµ©ä¹‹">
      <figcaption>çŸ³äº• æµ©ä¹‹</figcaption>
    </figure>

    <p>
      ã‚¢ãƒ«ãƒ‘ã‚«å¤§å¥½ãã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
    </p>

    <p class="go_to_aboutme">
      <a href="/about_me">â†’è©³ã—ãè¦‹ã‚‹</a>
    </p>
  </section>
</section>

  

  <section id="side_sharing" class="sidebar_row">
  <div class="button hatena_bookmark_button">
    <a href="https://b.hatena.ne.jp/entry/http://alpaca.tc" class="hatena-bookmark-button" data-hatena-bookmark-title="Railsã¨Rubyã¨Vimã®ãƒ–ãƒ­ã‚°" data-hatena-bookmark-layout="small" data-hatena-bookmark-lang="ja" title="ã“ã®ãƒ–ãƒ­ã‚°ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">
      <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ãƒ–ãƒ­ã‚°ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" />
    </a>
  <!-- </div> -->
</section>


  <section id="side_twitter_timeline_widget" class="sidebar_row">
  <a class="twitter-timeline" href="https://twitter.com/alpaca_tc" data-widget-id="395937677314232320">@alpaca_tc ã‹ã‚‰ã®ãƒ„ã‚¤ãƒ¼ãƒˆ</a>
</section>

</aside>

          </div>
        </div>
      </div><!-- /div#main_contents -->

      <footer role="contentinfo">        <div class="inner_wrapper">
          <div class="inner">
            <div id="go_to_top" class="clearfix">
              <p><a href="#header_top">Go to Top</a></p>
            </div>
          </div>
        </div>

        <div class="inner_wrapper">
          <div class="inner">
            <div id="footer_link" class="clearfix">
              <nav id="footer_nav">
                <ul class="clearfix">
                  <li>
                    <a rel="nofollow" href="/about_me">About Me</a>
                  </li>
                  <li>
                    <a href="/">Blog</a>
                  </li>
                  <li>
                    <a rel="nofollow" href="/works/">Works</a>
                  </li>
                </ul>
              </nav>


              <nav id="footer_social_link">
                <ul class="clearfix">
                  <li class="qiita">
                    <a href="mailto:alprhcp666@gmail.com">
                      <img src="/images/social/icon_mail.png" alt="Send mail to alpaca-tc">
                    </a>
                  </li>
                  <li class="github">
                    <a target="_blank" href="https://github.com/alpaca-tc">
                      <img src="/images/social/icon_github.png" alt="Github @alpaca-tc">
                    </a>
                  </li>
                  <li class="twitter">
                    <a target="_blank" href="https://twitter.com/alpaca_tc">
                      <img src="/images/social/icon_twitter.png" alt="Twitter @alpaca_tc">
                    </a>
                  </li>
                </ul>
              </nav>

            </div>
          </div>
        </div>
        <div id="footer_mark">
          <small>&nbsp;&copy; 2013, alpaca.tc</small>
        </div>
        <script>
(function(w, d) {
  load_javascript();
  window.onload = function () {
    setTimeout(function() { lazy_load_javascript(); }, 100);
  };

  function insert_javascript(u, i) {
    var s, e = d.getElementsByTagName('script')[0];
    if (!d.getElementById(i)) {
      s = d.createElement('script');
      s.src = u;
      s.async = true
      if (i) {
        s.id = i;
      }
      e.parentNode.insertBefore(s, e);
    }
  };

  function lazy_load_javascript() {
    insert_javascript('//platform.twitter.com/widgets.js', 'twitter-wjs');
    insert_javascript('//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=224701561024840', 'facebook-jssdk');
    insert_javascript('//apis.google.com/js/plusone.js');
  }

  function load_javascript() {
    insert_javascript('//b.st-hatena.com/js/bookmark_button_wo_al.js');
    insert_javascript('//alpaca-tc.disqus.com/embed.js');
  }
})(this, document);
</script>

</footer>
    </div>
  </body>
</html>
